{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-a9c4d191b9895830.js","src/js/aside-categories.js","src/js/modal-window.js","node_modules/@parcel/runtime-js/lib/runtime-80feda45bc592a11.js","node_modules/@parcel/runtime-js/lib/runtime-9f9fd9c451955085.js","node_modules/@parcel/runtime-js/lib/runtime-4f0f15ec53ac799d.js","node_modules/@parcel/runtime-js/lib/runtime-bd72d313c3f5edd0.js","node_modules/@parcel/runtime-js/lib/runtime-eaf86614c0714f75.js","node_modules/@parcel/runtime-js/lib/runtime-8ab60666a9f92dd7.js","src/js/templates/create-categories.js","src/js/main-page.js","src/js/templates/create-book.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"9p9yL\\\":\\\"index.2decbb59.js\\\",\\\"2dPzb\\\":\\\"amazon.3c3f1cde.webp\\\",\\\"82OGy\\\":\\\"amazon.b0a6f23c.png\\\",\\\"glj45\\\":\\\"apple.78ef44cc.webp\\\",\\\"cKFxX\\\":\\\"apple.34efda77.png\\\",\\\"kLXsS\\\":\\\"bookshop.bf5b4137.webp\\\",\\\"jA3cI\\\":\\\"bookshop.11f8a97b.png\\\",\\\"bBRCa\\\":\\\"shopping-list.44809c59.js\\\"}\"));","import { SwaggerAPI } from './swagger-api';\nimport createCategoriesMarkup from './templates/create-categories';\nimport addListener from './modal-window.js';\n\nconst categoriesList = document.querySelector('.aside-list');\nconst categoriesTitle = document.querySelector('.aside-title')\nconst renderingCategories = document.querySelector('.main-content');\n\nconst swaggerCategoriesApi = new SwaggerAPI();\n\nconst createCategoriesItem = async () => {\n  try {\n    const { data } = await swaggerCategoriesApi.fetchBooksCategoryList();\n    const searchCategory = data.map(category => {\n      return `<a class=\"aside-link\" ><li class=\"aside-item\">${category.list_name}</li></a>`;\n    }).join('');\n    categoriesList.innerHTML = searchCategory;\n  } catch (error) {\n    console.log(error);\n  };\n};\ncreateCategoriesItem();\n\n\nlet activeCategoryLink = null;\n\n\n//ф-я відображення книг\nconst onCategoriesLinkClick = event => {\n  const value = event.target.textContent;\n  swaggerCategoriesApi.categoryName = value;\n\n  if (activeCategoryLink) {\n    activeCategoryLink.classList.remove('active');\n  }\n\n  activeCategoryLink = event.target;\n  activeCategoryLink.classList.add('active');\n  categoriesTitle.classList.remove('active');\n\n  const createMarkupCategories = async () => {\n    try {\n      const { data } = await swaggerCategoriesApi.fetchBooksByCategory(value);\n      console.log(data);\n\n      const listName = data[0].list_name;\n\n      const words = listName.split(' ');\n      const lastWord = words[words.length - 1];\n      const otherWords = words.slice(0, words.length - 1).join(' ');\n\n      const decoratedListName = `${otherWords} <span class=\"categories-title-decor\">${lastWord}</span>`;\n      renderingCategories.innerHTML = `<h1 class=\"categories-title\">${decoratedListName}</h1> <ul class=\"categories-item\">${createCategoriesMarkup(\n        data\n      )}</ul>`;\n      addListener()\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  createMarkupCategories();\n};\n\ncategoriesList.addEventListener('click', onCategoriesLinkClick);","// -----------images----------\nimport amazon from '../images/shopping/amazon.webp';\nimport amazonpng from '../images/shopping/amazon.png';\nimport apple from '../images/shopping/apple.webp';\nimport applepng from '../images/shopping/apple.png';\nimport bookshop from '../images/shopping/bookshop.webp';\nimport bookshoppng from '../images/shopping/bookshop.png';\n// -----------------------------\nimport localStorage from './local-storage.js';\nimport { SwaggerAPI } from './swagger-api.js';\nimport { countBook } from './templates/shoppingListCounter';\nconst fetchAPI = new SwaggerAPI();\n\nconst backdrop = document.querySelector('.backdrop');\nconst closeBtn = document.querySelector('.modal-close-btn');\nconst modalShoppingBtn = document.querySelector('.modal-btn');\nconst modalInfo = document.querySelector('.modal-info');\nconst container = document.querySelector('.modal-book');\nlet bookApi = {};\n\nexport default function addListener() {\n  const bookContainer = document.querySelectorAll('.book-link');\n  bookContainer.forEach(book =>\n    book.addEventListener('click', onOpenModalWindow)\n  );\n}\n\nasync function onOpenModalWindow(event) {\n  event.preventDefault();\n  document.body.style.overflow = 'hidden';\n  backdrop.classList.toggle('is-hidden');\n  backdrop.addEventListener('click', onBackdrop);\n  window.addEventListener('keydown', onEsc);\n  closeBtn.addEventListener('click', onCloseModalWindow);\n  try {\n    fetchAPI.bookId = event.currentTarget.dataset.id;\n    const resp = await fetchAPI.fetchBookById();\n    bookApi = resp.data;\n    console.log(bookApi);\n    createBookMarkup(bookApi);\n    createShoppingBtn(bookApi);\n    modalShoppingBtn.addEventListener('click', onUpdateShopList);\n  } catch {\n    err => console.log(err);\n  }\n}\n\nfunction createShoppingBtn(data) {\n  const storage = localStorage.load('bookList');\n  if (!storage || storage.length === 0) {\n    addBtn();\n    return;\n  }\n  for (book of storage) {\n    if (book.title === data.title) {\n      removeBtn();\n      return;\n    } else {\n      addBtn();\n    }\n  }\n}\n\nfunction onUpdateShopList() {\n  const storage = localStorage.load('bookList');\n  const title = document.querySelector('.modal-book-name').textContent;\n  if (modalShoppingBtn.textContent === 'add to shopping list') {\n    localStorage.addBookToStorage(bookApi);\n    removeBtn();\n    countBook();\n  } else {\n    storage.forEach((book, ind, arr) => {\n      if (book.title === title) {\n        return arr.splice(ind, 1);\n      }\n    });\n\n    localStorage.save('bookList', storage);\n    if (storage.length === 0) {\n      localStorage.remove('bookList');\n    }\n    countBook();\n    addBtn();\n  }\n}\n\nfunction addBtn() {\n  modalShoppingBtn.textContent = 'add to shopping list';\n  modalInfo.style.display = 'none';\n}\n\nfunction removeBtn() {\n  modalShoppingBtn.textContent = 'remove from the shopping list';\n  modalInfo.style.display = 'block';\n}\n\nfunction createBookMarkup(book) {\n  const markup = `<img\nclass=\"modal-img\"\nsrc=${book.book_image}\nalt=\"Book cover\"\n/>\n<div class=\"modal-info-container\">\n<p class=\"modal-book-name\">${book.title}</p>\n<p class=\"modal-book-author\">${book.author}</p>\n<p class=\"modal-list-name is-hidden\">${book.list_name}</p>\n<p class=\"modal-book-desc\">${book.description}\n</p>\n<div class=\"modal-icons-container\">\n  <a href=\"${book.buy_links[0].url}\" target=\"_blank\" rel=\"noopener noreferrer\"\n    ><picture class=\"modal-icon\">\n      <source\n        srcset=\"${amazon}\"\n        type=\"image/webp\"\n      />\n      <source\n        srcset=\"${amazonpng}\"\n        type=\"image/png\"\n      />\n      <img\n        src=\"${amazonpng}\"\n        alt=\"Amazon\"\n      /> </picture\n  ></a>\n  <a href=\"${book.buy_links[1].url}\" target=\"_blank\" rel=\"noopener noreferrer\"\n    ><picture class=\"modal-icon\">\n      <source\n        srcset=\"${apple}\"\n        type=\"image/webp\"\n      />\n      <source\n        srcset=\"${applepng}\"\n        type=\"image/png\"\n      />\n      <img\n        src=\"${applepng}\"\n        alt=\"Apple Books\"\n      /> </picture\n  ></a>\n  <a href=\"${book.buy_links[4].url}\" target=\"_blank\" rel=\"noopener noreferrer\"\n    ><picture class=\"modal-icon\">\n      <source\n        srcset=\"${bookshop}\"\n        type=\"image/webp\"\n      />\n      <source\n        srcset=\"${bookshoppng}\"\n        type=\"image/png\"\n      />\n      <img\n        src=\"${bookshoppng}\"\n        alt=\"Bookshop\"\n      /></picture\n  ></a>\n</div>\n</div>`;\n  container.innerHTML = markup;\n}\n\nfunction onEsc(event) {\n  if (event.key === 'Escape') {\n    onCloseModalWindow();\n  }\n}\n\nfunction onBackdrop(event) {\n  if (event.target === backdrop) {\n    onCloseModalWindow();\n  }\n}\n\nfunction onCloseModalWindow() {\n  backdrop.classList.toggle('is-hidden');\n  document.body.style.overflow = 'visible';\n  backdrop.removeEventListener('click', onBackdrop);\n  window.removeEventListener('keydown', onEsc);\n  closeBtn.removeEventListener('click', onCloseModalWindow);\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + require('./helpers/bundle-manifest').resolve(\"2dPzb\");","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + require('./helpers/bundle-manifest').resolve(\"82OGy\");","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + require('./helpers/bundle-manifest').resolve(\"glj45\");","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + require('./helpers/bundle-manifest').resolve(\"cKFxX\");","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + require('./helpers/bundle-manifest').resolve(\"kLXsS\");","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + require('./helpers/bundle-manifest').resolve(\"jA3cI\");","export default function createCategoriesMarkup(bookInfo) {\n\n  const markup = bookInfo\n    .map(book => {\n      const { book_image, description, title, author, _id } = book;\n\n      return `\n\n<li class=\"category-list-item\">\n<a class=\"book-link\" href=\"\" data-id = \"${_id}\">\n<div class=\"book-thumb\">\n<img class=\"book-image\" src=\"${book_image}\" alt=\"${description}\" />\n<div class=\"book-overlay\">\n<p class=\"book-overlay-text\">quick view</p>\n</div>\n</div>\n<div class=\"book-card-content\">\n<h2 class=\"book-title\">${title}</h2>\n<p class=\"book-author\">${author}</p>\n</div>\n</a>\n</li>`;\n    })\n    .join('');\n  return markup;\n}\n\n","import { SwaggerAPI } from './swagger-api.js';\nimport createBook from './templates/create-book.js';\nimport addListener from './modal-window.js';\n\nconst booksContainer = document.querySelector('.category-list');\nconst title = document.querySelector('.home-title');\n\nconst topBooksAPI = new SwaggerAPI();\n\nlet bodyWidth = 0;\n\nonload = event => {\n  bodyWidth = event.target.body.clientWidth;\n};\n\ncreateBlock();\n\nasync function createBlock() {\n  try {\n    const { data } = await topBooksAPI.fetchTopBooks();\n\n    for (let i = 0; i < 4; i++) {\n      let topBooks = data[i].books;\n      let markUpCount = 0;\n\n      if (bodyWidth <= 767) {\n        markUpCount = 1;\n      }\n      if (bodyWidth >= 768 && bodyWidth < 1440) {\n        markUpCount = 3;\n      }\n      if (bodyWidth >= 1440) {\n        markUpCount = 5;\n      }\n\n      const markup = `<li class=\"category-list-item top-list-item\">\n        <p class=\"category-name\" data-category-name=\"${\n          topBooks[0].list_name\n        }\">${topBooks[0].list_name}</p>\n        <ul class=\"books-list\">\n          ${createBook(topBooks.slice(0, markUpCount))}\n        </ul>\n       <button class=\"category-list-button\">see more</button>  \n      </li>`;\n\n      booksContainer.insertAdjacentHTML('beforeend', markup);\n      findBtn();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n  addListener()\n}\n\nfunction findBtn() {\n  const seeMoreBtnEls = document.querySelectorAll('.category-list-button');\n\n  seeMoreBtnEls.forEach(seeMoreBtn => {\n    seeMoreBtn.addEventListener('click', onSeeMoreBtnClick);\n  });\n}\n\nasync function onSeeMoreBtnClick(event) {\n  try {\n    const name =\n      event.target.previousElementSibling.previousElementSibling.textContent;\n\n    topBooksAPI.categoryName = name;\n    const { data } = await topBooksAPI.fetchBooksByCategory();\n\n    title.innerHTML = divideTitleElements(name);\n    booksContainer.classList.add('category-list-click');\n    booksContainer.innerHTML = createBook(data);\n    addActiveClassToCategoryListItem(name);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction divideTitleElements(categoryName) {\n\n\n  const words = categoryName.split(' ');\n  const lastWord = words[words.length - 1];\n  const otherWords = words.slice(0, words.length - 1).join(' ');\n\n  return `<span class=\"home-title-decor\">${otherWords} </span>${lastWord}`;\n}\n\n\nfunction addActiveClassToCategoryListItem(name) {\n  const asideCategoryItems = document.querySelectorAll('.aside-item');\n  const allCategoriesTitle = document.querySelector('.aside-title');\n\n  asideCategoryItems.forEach(asideCategoryItem => {\n    if (name === asideCategoryItem.textContent) {\n      allCategoriesTitle.classList.toggle('active');\n      asideCategoryItem.classList.toggle('active');\n    }\n  });\n}\n","export default function createBook(bookInfo) {\n  const markup = bookInfo\n    .map(book => {\n      const { book_image, description, title, author, _id } = book;\n      return `<li class=\"books-list-item\">\n                 <a class=\"book-link\" href=\"\" data-id=\"${_id}\">\n                    <div class=\"book-thumb\">\n                      <img class=\"book-image\" src=\"${book_image}\" alt=\"${description}\" />\n\n                        <div class=\"book-overlay\">\n                       <p class=\"book-overlay-text\">quick view</p>\n                       </div>\n                       </div>                     \n                     <div class=\"book-card-content\">\n                     <h2 class=\"book-title\">${title}</h2>\n                     <p class=\"book-author\">${author}</p>\n                     </div>\n                 </a>                    \n              </li>`;\n    })\n    .join('');\n  return markup;\n}\n"],"names":["parcelRequire","register","JSON","parse","$bpxeT","$ab68b0bff8d326c6$exports","getBundleURL","resolve","$696aa0dbef714b62$exports","$f50635ad385f20d0$exports","$e6d9b4b581a9db11$exports","$2f2dc81ef442f82a$exports","$d7e2380ebd63f1c1$exports","$50be0534152dd275$var$fetchAPI","$hrrt1","SwaggerAPI","$50be0534152dd275$var$backdrop","document","querySelector","$50be0534152dd275$var$closeBtn","$50be0534152dd275$var$modalShoppingBtn","$50be0534152dd275$var$modalInfo","$50be0534152dd275$var$container","$50be0534152dd275$var$bookApi","$50be0534152dd275$export$2e2bcd8739ae039","querySelectorAll","forEach","book","addEventListener","$50be0534152dd275$var$onOpenModalWindow","event","$50be0534152dd275$var$_onOpenModalWindow","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","resp","preventDefault","body","style","overflow","classList","toggle","$50be0534152dd275$var$onBackdrop","window","$50be0534152dd275$var$onEsc","$50be0534152dd275$var$onCloseModalWindow","bookId","currentTarget","dataset","id","fetchBookById","_ctx","sent","data","console","log","$50be0534152dd275$var$createBookMarkup","$50be0534152dd275$var$createShoppingBtn","$50be0534152dd275$var$onUpdateShopList","storage","$4LMMA","default","load","length","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","title","$50be0534152dd275$var$removeBtn","$50be0534152dd275$var$addBtn","err","return","textContent","addBookToStorage","$i9Oqj","countBook","ind","arr","splice","save","remove","display","markup","concat","book_image","author","list_name","description","buy_links","url","innerHTML","key","target","removeEventListener","$8b6b1471fc91ee12$var$categoriesList","$8b6b1471fc91ee12$var$categoriesTitle","$8b6b1471fc91ee12$var$renderingCategories","$8b6b1471fc91ee12$var$swaggerCategoriesApi","$8b6b1471fc91ee12$var$createCategoriesItem","searchCategory","fetchBooksCategoryList","map","category","join","t0","$8b6b1471fc91ee12$var$activeCategoryLink","categoryName","add","createMarkupCategories","listName","words","lastWord","otherWords","decoratedListName","fetchBooksByCategory","split","slice","_id","$92816cdb1debc4c6$export$2e2bcd8739ae039","bookInfo","$6b1db6d68125062a$var$booksContainer","$6b1db6d68125062a$var$title","$6b1db6d68125062a$var$topBooksAPI","$6b1db6d68125062a$var$bodyWidth","$6b1db6d68125062a$var$_createBlock","i","topBooks","markUpCount","fetchTopBooks","books","insertAdjacentHTML","$6b1db6d68125062a$var$findBtn","seeMoreBtn","$6b1db6d68125062a$var$onSeeMoreBtnClick","$6b1db6d68125062a$var$_onSeeMoreBtnClick","name","previousElementSibling","$6b1db6d68125062a$var$divideTitleElements","$6b1db6d68125062a$var$addActiveClassToCategoryListItem","asideCategoryItems","allCategoriesTitle","asideCategoryItem","onload","clientWidth","$6b1db6d68125062a$var$createBlock"],"version":3,"file":"index.2decbb59.js.map"}