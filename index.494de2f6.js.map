{"mappings":"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","sources":["src/js/aside-categories.js","src/js/templates/create-categories.js","src/js/main-page.js","src/js/templates/create-book.js"],"sourcesContent":["import { SwaggerAPI } from './swagger-api';\nimport createCategoriesMarkup from './templates/create-categories';\n\nconst categoriesList = document.querySelector('.aside-list');\nconst renderingCategories = document.querySelector('.main-content');\nconsole.log(renderingCategories);\n\nconst swaggerCategoriesApi = new SwaggerAPI();\n\nswaggerCategoriesApi\n  .fetchBooksCategoryList()\n  .then(({ data }) => {\n    const searchCategory = data\n      .map(category => {\n        return `<a class=\"aside-link\"><li class=\"aside-item\">${category.list_name}</li></a>`;\n      })\n      .join('');\n    categoriesList.innerHTML = searchCategory;\n  })\n  .catch(error => {\n    console.log(error);\n  });\n\n//ф-я відображення книг\nconst onCategoriesLinkClick = event => {\n  const value = event.target.textContent;\n  swaggerCategoriesApi.categoryName = value;\n\n  swaggerCategoriesApi\n    .fetchBooksByCategory(value)\n    .then(({ data }) => {\n      const listName = data[0].list_name;\n\n      const words = listName.split(' ');\n      const halfIndex = words.length / 2;\n\n      const firstHalf = words.slice(0, halfIndex).join(' ');\n      const secondHalf = words.slice(halfIndex).join(' ');\n\n      const decoratedListName = `${firstHalf} <span class=\"categories-title-decor\">${secondHalf}</span>`;\n      renderingCategories.innerHTML = `<h1 class=\"categories-title\">${decoratedListName}</h1> <ul class=\"categories-item\">${createCategoriesMarkup(\n        data\n      )}</ul>`;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n};\n\ncategoriesList.addEventListener('click', onCategoriesLinkClick);\n","export default function createCategoriesMarkup(bookInfo) {\n\n  const markup = bookInfo\n    .map(book => {\n      const { book_image, description, title, author } = book;\n\n      return `\n\n<li class=\"category-list-item\">\n<a class=\"book-link\" href=\"\">\n<img class=\"book-image\" src=\"${book_image}\" alt=\"${description}\" />\n<div class=\"book-card-content\">\n<h2 class=\"book-title\">${title}</h2>\n<p class=\"book-author\">${author}</p>\n</div>\n</a>\n</li>`;\n    })\n    .join('');\n  return markup;\n}\n\n","import { SwaggerAPI } from './swagger-api.js';\nimport createBook from './templates/create-book.js';\n\nconst booksContainer = document.querySelector('.category-list');\nconst title = document.querySelector('.home-title');\n\nconst topBooksAPI = new SwaggerAPI();\n\nlet bodyWidth = 0;\n\nonload = event => {\n  bodyWidth = event.target.body.clientWidth;\n};\n\ncreateBlock();\n\nasync function createBlock() {\n  try {\n    const { data } = await topBooksAPI.fetchTopBooks();\n\n    for (let i = 0; i < 4; i++) {\n      let topBooks = data[i].books;\n      let markUpCount = 0;\n\n      if (bodyWidth <= 767) {\n        markUpCount = 1;\n      }\n      if (bodyWidth >= 768 && bodyWidth < 1440) {\n        markUpCount = 3;\n      }\n      if (bodyWidth >= 1440) {\n        markUpCount = 5;\n      }\n\n      const markup = `<li class=\"category-list-item top-list-item\">\n        <p class=\"category-name\" data-category-name=\"${\n          topBooks[0].list_name\n        }\">${topBooks[0].list_name}</p>\n        <ul class=\"books-list\">\n          ${createBook(topBooks.slice(0, markUpCount))}\n        </ul>\n       <button class=\"category-list-button\">see more</button>  \n      </li>`;\n\n      booksContainer.insertAdjacentHTML('beforeend', markup);\n      findBtn();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction findBtn() {\n  const seeMoreBtnEls = document.querySelectorAll('.category-list-button');\n\n  seeMoreBtnEls.forEach(seeMoreBtn => {\n    seeMoreBtn.addEventListener('click', onSeeMoreBtnClick);\n  });\n}\n\nasync function onSeeMoreBtnClick(event) {\n  try {\n    const name =\n      event.target.previousElementSibling.previousElementSibling.textContent;\n\n    topBooksAPI.categoryName = name;\n    const { data } = await topBooksAPI.fetchBooksByCategory();\n\n    title.innerHTML = divideTitleElements(name);\n    booksContainer.classList.add('category-list-click');\n    booksContainer.innerHTML = createBook(data);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction divideTitleElements(categoryName) {\n  const words = categoryName.split(' ');\n  const halfIndex = words.length / 2;\n\n  const firstHalf = words.slice(0, halfIndex).join(' ');\n  const secondHalf = words.slice(halfIndex).join(' ');\n\n  return `${firstHalf} <span class=\"home-title-decor\">${secondHalf}</span>`;\n}\n","export default function createBook(bookInfo) {\n  const markup = bookInfo\n    .map(book => {\n      const { book_image, description, title, author, _id } = book;\n      return `<li class=\"books-list-item\">\n                 <a class=\"book-link\" href=\"\" data-id=\"${_id}\">\n                    <div class=\"book-thumb\">\n                      <img class=\"book-image\" src=\"${book_image}\" alt=\"${description}\" />\n\n                        <div class=\"book-overlay\">\n                       <p class=\"book-overlay-text\">quick view</p>\n                       </div>\n                       </div>                     \n                     <div class=\"book-card-content\">\n                     <h2 class=\"book-title\">${title}</h2>\n                     <p class=\"book-author\">${author}</p>\n                     </div>\n                 </a>                    \n              </li>`;\n    })\n    .join('');\n  return markup;\n}\n"],"names":["$b2XdZ","parcelRequire","$8624f18deccb59bb$var$categoriesList","document","querySelector","$8624f18deccb59bb$var$renderingCategories","console","log","$8624f18deccb59bb$var$swaggerCategoriesApi","SwaggerAPI","fetchBooksCategoryList","then","data","searchCategory","map","category","list_name","join","innerHTML","catch","error","addEventListener","event","value","target","textContent","categoryName","fetchBooksByCategory","words","split","halfIndex","length","decoratedListName","slice","bookInfo","book","book_image","description","title","author","$1f74396456af3c8a$export$2e2bcd8739ae039","_id","$866dea3744b84f28$var$booksContainer","$866dea3744b84f28$var$title","$866dea3744b84f28$var$topBooksAPI","$866dea3744b84f28$var$bodyWidth","$866dea3744b84f28$var$findBtn","querySelectorAll","forEach","seeMoreBtn","$866dea3744b84f28$var$onSeeMoreBtnClick","async","name","previousElementSibling","firstHalf","secondHalf","$866dea3744b84f28$var$divideTitleElements","classList","add","onload","body","clientWidth","fetchTopBooks","i","topBooks","books","markUpCount","markup","insertAdjacentHTML","$866dea3744b84f28$var$createBlock"],"version":3,"file":"index.494de2f6.js.map"}