function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},a={},i=n.parcelRequired7c6;null==i&&((i=function(e){if(e in o)return o[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},n.parcelRequired7c6=i),i.register("kyEFX",(function(t,n){var o,a;e(t.exports,"register",(function(){return o}),(function(e){return o=e})),e(t.exports,"resolve",(function(){return a}),(function(e){return a=e}));var i={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)i[t[n]]=e[t[n]]},a=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i("kyEFX").register(JSON.parse('{"7bk21":"index.7d146f68.js","7QMdA":"amazon.3c3f1cde.webp","CgNCO":"amazon.b0a6f23c.png","3CFHC":"apple.78ef44cc.webp","hYuvF":"apple.34efda77.png","lKiFj":"bookshop.bf5b4137.webp","1dJFY":"bookshop.11f8a97b.png","91Y78":"index.159f0d3f.js"}'));var r=i("b2XdZ");const s=document.querySelector(".aside-list"),l=document.querySelector(".aside-title"),c=document.querySelector(".main-content"),d=new(0,r.SwaggerAPI);(async()=>{try{const{data:e}=await d.fetchBooksCategoryList(),t=e.map((e=>`<a class="aside-link"><li class="aside-item">${e.list_name}</li></a>`)).join("");s.innerHTML=t}catch(e){console.log(e)}})();let u=null;s.addEventListener("click",(e=>{const t=e.target.textContent;d.categoryName=t,u&&u.classList.remove("active"),u=e.target,u.classList.add("active"),l.classList.remove("active");(async()=>{try{const{data:n}=await d.fetchBooksByCategory(t);console.log(n);const o=n[0].list_name.split(" "),a=o.length/2,i=o.slice(0,a).join(" "),r=`${i} <span class="categories-title-decor">${o.slice(a).join(" ")}</span>`;c.innerHTML=`<h1 class="categories-title">${r}</h1> <ul class="categories-item">${e=n,e.map((e=>{const{book_image:t,description:n,title:o,author:a}=e;return`\n\n<li class="category-list-item">\n<a class="book-link" href="">\n<div class="book-thumb">\n<img class="book-image" src="${t}" alt="${n}" />\n<div class="book-overlay">\n<p class="book-overlay-text">quick view</p>\n</div>\n</div>\n<div class="book-card-content">\n<h2 class="book-title">${o}</h2>\n<p class="book-author">${a}</p>\n</div>\n</a>\n</li>`})).join("")}</ul>`}catch(e){console.log(e)}var e})()})),i("3gLCb"),i("8BGGW"),i("bUb57");r=i("b2XdZ");function m(e){return e.map((e=>{const{book_image:t,description:n,title:o,author:a,_id:i}=e;return`<li class="books-list-item">\n                 <a class="book-link" href="" data-id="${i}">\n                    <div class="book-thumb">\n                      <img class="book-image" src="${t}" alt="${n}" />\n\n                        <div class="book-overlay">\n                       <p class="book-overlay-text">quick view</p>\n                       </div>\n                       </div>                     \n                     <div class="book-card-content">\n                     <h2 class="book-title">${o}</h2>\n                     <p class="book-author">${a}</p>\n                     </div>\n                 </a>                    \n              </li>`})).join("")}var p;p=new URL(i("kyEFX").resolve("7QMdA"),import.meta.url).toString();var g;g=new URL(i("kyEFX").resolve("CgNCO"),import.meta.url).toString();var b;b=new URL(i("kyEFX").resolve("3CFHC"),import.meta.url).toString();var f;f=new URL(i("kyEFX").resolve("hYuvF"),import.meta.url).toString();var k;k=new URL(i("kyEFX").resolve("lKiFj"),import.meta.url).toString();var v;v=new URL(i("kyEFX").resolve("1dJFY"),import.meta.url).toString();var y=i("b5rV1");const h=new(0,(r=i("b2XdZ")).SwaggerAPI),w=document.querySelector(".backdrop"),E=document.querySelector(".modal-close-btn"),L=document.querySelector(".modal-btn"),S=document.querySelector(".modal-info"),$=document.querySelector(".modal-book");let _={};async function F(e){e.preventDefault(),document.body.style.overflow="hidden",w.classList.toggle("is-hidden"),w.addEventListener("click",x),window.addEventListener("keydown",A),E.addEventListener("click",R);try{h.bookId=e.currentTarget.dataset.id;const n=await h.fetchBookById();_=n.data,function(e){const n=`<img\nclass="modal-img"\nsrc=${e.book_image}\nalt="Book cover"\n/>\n<div class="modal-info-container">\n<p class="modal-book-name">${e.title}</p>\n<p class="modal-book-author">${e.author}</p>\n<p class="modal-list-name is-hidden">${e.list_name}</p>\n<p class="modal-book-desc">${e.description}\n</p>\n<div class="modal-icons-container">\n  <a href="${e.buy_links[0].url}" target="_blank" rel="noopener noreferrer"\n    ><picture class="modal-icon">\n      <source\n        srcset="${t(p)}"\n        type="image/webp"\n      />\n      <source\n        srcset="${t(g)}"\n        type="image/png"\n      />\n      <img\n        src="${t(g)}"\n        alt="Amazon"\n      /> </picture\n  ></a>\n  <a href="${e.buy_links[1].url}" target="_blank" rel="noopener noreferrer"\n    ><picture class="modal-icon">\n      <source\n        srcset="${t(b)}"\n        type="image/webp"\n      />\n      <source\n        srcset="${t(f)}"\n        type="image/png"\n      />\n      <img\n        src="${t(f)}"\n        alt="Apple Books"\n      /> </picture\n  ></a>\n  <a href="${e.buy_links[4].url}" target="_blank" rel="noopener noreferrer"\n    ><picture class="modal-icon">\n      <source\n        srcset="${t(k)}"\n        type="image/webp"\n      />\n      <source\n        srcset="${t(v)}"\n        type="image/png"\n      />\n      <img\n        src="${t(v)}"\n        alt="Bookshop"\n      /></picture\n  ></a>\n</div>\n</div>`;$.innerHTML=n}(_),function(e){const t=y.default.load("bookList");if(console.log(t),!t||0===t.length)return void C();for(book of t){if(book.title===e.title)return void q();C()}}(_),L.addEventListener("click",H)}catch{}}function H(){const e=y.default.load("bookList"),t=document.querySelector(".modal-book-name").textContent;"add to shopping list"===L.textContent?(y.default.addBookToStorage(_),q()):(e.forEach(((e,n,o)=>{if(e.title===t)return o.splice(n,1)})),y.default.save("bookList",e),C())}function C(){L.textContent="add to shopping list",S.style.display="none"}function q(){L.textContent="remove from the shopping list",S.style.display="block"}function A(e){"Escape"===e.key&&R()}function x(e){e.target===w&&R()}function R(){w.classList.toggle("is-hidden"),document.body.style.overflow="visible",w.removeEventListener("click",x),window.removeEventListener("keydown",A),E.removeEventListener("click",R)}const j=document.querySelector(".category-list"),B=document.querySelector(".home-title"),T=new(0,r.SwaggerAPI);let X=0;function M(){document.querySelectorAll(".category-list-button").forEach((e=>{e.addEventListener("click",U)}))}async function U(e){try{const t=e.target.previousElementSibling.previousElementSibling.textContent;T.categoryName=t;const{data:n}=await T.fetchBooksByCategory();B.innerHTML=function(e){const t=e.split(" "),n=t.length/2,o=t.slice(0,n).join(" "),a=t.slice(n).join(" ");return`${o} <span class="home-title-decor">${a}</span>`}(t),j.classList.add("category-list-click"),j.innerHTML=m(n),function(e){const t=document.querySelectorAll(".aside-item"),n=document.querySelector(".aside-title");t.forEach((t=>{e===t.textContent&&(n.classList.toggle("active"),t.classList.toggle("active"))}))}(t)}catch(e){console.log(e)}}onload=e=>{X=e.target.body.clientWidth},async function(){try{const{data:e}=await T.fetchTopBooks();for(let t=0;t<4;t++){let n=e[t].books,o=0;X<=767&&(o=1),X>=768&&X<1440&&(o=3),X>=1440&&(o=5);const a=`<li class="category-list-item top-list-item">\n        <p class="category-name" data-category-name="${n[0].list_name}">${n[0].list_name}</p>\n        <ul class="books-list">\n          ${m(n.slice(0,o))}\n        </ul>\n       <button class="category-list-button">see more</button>  \n      </li>`;j.insertAdjacentHTML("beforeend",a),M()}}catch(e){console.log(e)}document.querySelectorAll(".book-link").forEach((e=>e.addEventListener("click",F)))}();
//# sourceMappingURL=index.7d146f68.js.map
