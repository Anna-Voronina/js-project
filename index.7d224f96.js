!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(e,t){o[e]=t},t.parcelRequired7c6=a),a("iE7OH").register(JSON.parse('{"9p9yL":"index.7d224f96.js","2dPzb":"amazon.3c3f1cde.webp","82OGy":"amazon.b0a6f23c.png","glj45":"apple.78ef44cc.webp","cKFxX":"apple.34efda77.png","kLXsS":"bookshop.bf5b4137.webp","jA3cI":"bookshop.11f8a97b.png","l20mf":"shopping-list.f5587f81.js"}'));var c=a("bpxeT"),r=a("2TvXO"),i=a("hrrt1");var s,l=document.querySelector(".aside-list"),u=document.querySelector(".aside-title"),d=document.querySelector(".main-content"),p=new(0,i.SwaggerAPI),v=(s=e(c)(e(r).mark((function t(){var n,o;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.fetchBooksCategoryList();case 3:n=e.sent.data,o=n.map((function(e){return'<a class="aside-link"><li class="aside-item">'.concat(e.list_name,"</li></a>")})).join(""),l.innerHTML=o,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),t,null,[[0,8]])}))),function(){return s.apply(this,arguments)});v();var f=null;l.addEventListener("click",(function(t){var n=t.target.textContent;p.categoryName=n,f&&f.classList.remove("active"),(f=t.target).classList.add("active"),u.classList.remove("active");var o=function(){var t=e(c)(e(r).mark((function t(){var o,a,c,i,s,l,u;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.fetchBooksByCategory(n);case 3:o=e.sent.data,console.log(o),a=o[0].list_name,c=a.split(" "),i=c.length/2,s=c.slice(0,i).join(" "),l=c.slice(i).join(" "),u="".concat(s,' <span class="categories-title-decor">').concat(l,"</span>"),d.innerHTML='<h1 class="categories-title">'.concat(u,'</h1> <ul class="categories-item">').concat(o.map((function(e){var t=e.book_image,n=e.description,o=e.title,a=e.author;return'\n\n<li class="category-list-item">\n<a class="book-link" href="">\n<div class="book-thumb">\n<img class="book-image" src="'.concat(t,'" alt="').concat(n,'" />\n<div class="book-overlay">\n<p class="book-overlay-text">quick view</p>\n</div>\n</div>\n<div class="book-card-content">\n<h2 class="book-title">').concat(o,'</h2>\n<p class="book-author">').concat(a,"</p>\n</div>\n</a>\n</li>")})).join(""),"</ul>"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}();o()})),a("71ZRj"),a("ekC86"),a("i8Q71");c=a("bpxeT"),r=a("2TvXO"),i=a("hrrt1");function m(e){return e.map((function(e){var t=e.book_image,n=e.description,o=e.title,a=e.author,c=e._id;return'<li class="books-list-item">\n                 <a class="book-link" href="" data-id="'.concat(c,'">\n                    <div class="book-thumb">\n                      <img class="book-image" src="').concat(t,'" alt="').concat(n,'" />\n\n                        <div class="book-overlay">\n                       <p class="book-overlay-text">quick view</p>\n                       </div>\n                       </div>                     \n                     <div class="book-card-content">\n                     <h2 class="book-title">').concat(o,'</h2>\n                     <p class="book-author">').concat(a,"</p>\n                     </div>\n                 </a>                    \n              </li>")})).join("")}var g;c=a("bpxeT"),r=a("2TvXO");g=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("2dPzb");var b;b=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("82OGy");var k;k=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("glj45");var y;y=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("cKFxX");var h;h=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("kLXsS");var L;L=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("jA3cI");var w=a("4LMMA"),x=new(0,(i=a("hrrt1")).SwaggerAPI),E=document.querySelector(".backdrop"),_=document.querySelector(".modal-close-btn"),S=document.querySelector(".modal-btn"),H=document.querySelector(".modal-info"),A=document.querySelector(".modal-book"),q={};function C(){document.querySelectorAll(".book-link").forEach((function(e){return e.addEventListener("click",B)}))}function B(e){return R.apply(this,arguments)}function R(){return(R=e(c)(e(r).mark((function t(n){var o;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),document.body.style.overflow="hidden",E.classList.toggle("is-hidden"),E.addEventListener("click",U),window.addEventListener("keydown",M),_.addEventListener("click",I),e.prev=6,x.bookId=n.currentTarget.dataset.id,e.next=10,x.fetchBookById();case 10:o=e.sent,N(q=o.data),T(q),S.addEventListener("click",O),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6);case 20:case"end":return e.stop()}}),t,null,[[6,17]])})))).apply(this,arguments)}function T(e){var t=w.default.load("bookList");if(console.log(t),t&&0!==t.length){var n=!0,o=!1,a=void 0;try{for(var c,r=t[Symbol.iterator]();!(n=(c=r.next()).done);n=!0){if(book=c.value,book.title===e.title)return void F();j()}}catch(e){o=!0,a=e}finally{try{n||null==r.return||r.return()}finally{if(o)throw a}}}else j()}function O(){var e=w.default.load("bookList"),t=document.querySelector(".modal-book-name").textContent;"add to shopping list"===S.textContent?(w.default.addBookToStorage(q),F()):(e.forEach((function(e,n,o){if(e.title===t)return o.splice(n,1)})),w.default.save("bookList",e),j())}function j(){S.textContent="add to shopping list",H.style.display="none"}function F(){S.textContent="remove from the shopping list",H.style.display="block"}function N(t){var n='<img\nclass="modal-img"\nsrc='.concat(t.book_image,'\nalt="Book cover"\n/>\n<div class="modal-info-container">\n<p class="modal-book-name">').concat(t.title,'</p>\n<p class="modal-book-author">').concat(t.author,'</p>\n<p class="modal-list-name is-hidden">').concat(t.list_name,'</p>\n<p class="modal-book-desc">').concat(t.description,'\n</p>\n<div class="modal-icons-container">\n  <a href="').concat(t.buy_links[0].url,'" target="_blank" rel="noopener noreferrer"\n    ><picture class="modal-icon">\n      <source\n        srcset="').concat(e(g),'"\n        type="image/webp"\n      />\n      <source\n        srcset="').concat(e(b),'"\n        type="image/png"\n      />\n      <img\n        src="').concat(e(b),'"\n        alt="Amazon"\n      /> </picture\n  ></a>\n  <a href="').concat(t.buy_links[1].url,'" target="_blank" rel="noopener noreferrer"\n    ><picture class="modal-icon">\n      <source\n        srcset="').concat(e(k),'"\n        type="image/webp"\n      />\n      <source\n        srcset="').concat(e(y),'"\n        type="image/png"\n      />\n      <img\n        src="').concat(e(y),'"\n        alt="Apple Books"\n      /> </picture\n  ></a>\n  <a href="').concat(t.buy_links[4].url,'" target="_blank" rel="noopener noreferrer"\n    ><picture class="modal-icon">\n      <source\n        srcset="').concat(e(h),'"\n        type="image/webp"\n      />\n      <source\n        srcset="').concat(e(L),'"\n        type="image/png"\n      />\n      <img\n        src="').concat(e(L),'"\n        alt="Bookshop"\n      /></picture\n  ></a>\n</div>\n</div>');A.innerHTML=n}function M(e){"Escape"===e.key&&I()}function U(e){e.target===E&&I()}function I(){E.classList.toggle("is-hidden"),document.body.style.overflow="visible",E.removeEventListener("click",U),window.removeEventListener("keydown",M),_.removeEventListener("click",I)}var J=document.querySelector(".category-list"),X=document.querySelector(".home-title"),z=new(0,i.SwaggerAPI),P=0;function D(){return(D=e(c)(e(r).mark((function t(){var n,o,a,c,i;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.fetchTopBooks();case 3:for(n=e.sent.data,o=0;o<4;o++)a=n[o].books,c=0,P<=767&&(c=1),P>=768&&P<1440&&(c=3),P>=1440&&(c=5),i='<li class="category-list-item top-list-item">\n        <p class="category-name" data-category-name="'.concat(a[0].list_name,'">').concat(a[0].list_name,'</p>\n        <ul class="books-list">\n          ').concat(m(a.slice(0,c)),'\n        </ul>\n       <button class="category-list-button">see more</button>  \n      </li>'),J.insertAdjacentHTML("beforeend",i),G();e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:C();case 11:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function G(){document.querySelectorAll(".category-list-button").forEach((function(e){e.addEventListener("click",K)}))}function K(e){return Q.apply(this,arguments)}function Q(){return(Q=e(c)(e(r).mark((function t(n){var o,a;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=n.target.previousElementSibling.previousElementSibling.textContent,z.categoryName=o,e.next=5,z.fetchBooksByCategory();case 5:a=e.sent.data,X.innerHTML=W(o),J.classList.add("category-list-click"),J.innerHTML=m(a),Z(o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}function W(e){var t=e.split(" "),n=t.length/2,o=t.slice(0,n).join(" "),a=t.slice(n).join(" ");return"".concat(o,' <span class="home-title-decor">').concat(a,"</span>")}function Z(e){var t=document.querySelectorAll(".aside-item"),n=document.querySelector(".aside-title");t.forEach((function(t){e===t.textContent&&(n.classList.toggle("active"),t.classList.toggle("active"))}))}onload=function(e){P=e.target.body.clientWidth},function(){D.apply(this,arguments)}(),a("4WFAO");var V=document.querySelector(".switch input");V.addEventListener("change",(function(){V.checked?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme")})),a("71ZRj"),a("ekC86"),a("i8Q71")}();
//# sourceMappingURL=index.7d224f96.js.map
