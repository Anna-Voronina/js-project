!function(){function e(e,n,t,o){Object.defineProperty(e,n,{get:t,set:o,enumerable:!0,configurable:!0})}function n(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},r={},c=t.parcelRequired7c6;null==c&&((c=function(e){if(e in o)return o[e].exports;if(e in r){var n=r[e];delete r[e];var t={id:e,exports:{}};return o[e]=t,n.call(t.exports,t,t.exports),t.exports}var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(e,n){r[e]=n},t.parcelRequired7c6=c),c.register("iE7OH",(function(n,t){var o,r;e(n.exports,"register",(function(){return o}),(function(e){return o=e})),e(n.exports,"resolve",(function(){return r}),(function(e){return r=e}));var c={};o=function(e){for(var n=Object.keys(e),t=0;t<n.length;t++)c[n[t]]=e[n[t]]},r=function(e){var n=c[e];if(null==n)throw new Error("Could not resolve bundle with id "+e);return n}})),c.register("aNJCr",(function(n,t){var o;e(n.exports,"getBundleURL",(function(){return o}),(function(e){return o=e}));var r={};function c(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}o=function(e){var n=r[e];return n||(n=function(){try{throw new Error}catch(n){var e=(""+n.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(e)return c(e[2])}return"/"}(),r[e]=n),n}})),c("iE7OH").register(JSON.parse('{"9p9yL":"index.80ab7664.js","2dPzb":"amazon.3c3f1cde.webp","82OGy":"amazon.b0a6f23c.png","glj45":"apple.78ef44cc.webp","cKFxX":"apple.34efda77.png","kLXsS":"bookshop.bf5b4137.webp","jA3cI":"bookshop.11f8a97b.png","bk09w":"index.246eb522.js"}'));var a=c("bpxeT"),i=c("2TvXO"),s=c("hrrt1");var l,u=document.querySelector(".aside-list"),d=document.querySelector(".aside-title"),p=document.querySelector(".main-content"),f=new(0,s.SwaggerAPI),v=(l=n(a)(n(i).mark((function e(){var t,o;return n(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.fetchBooksCategoryList();case 3:t=e.sent.data,o=t.map((function(e){return'<a class="aside-link"><li class="aside-item">'.concat(e.list_name,"</li></a>")})).join(""),u.innerHTML=o,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(){return l.apply(this,arguments)});v();var m=null;u.addEventListener("click",(function(e){var t=e.target.textContent;f.categoryName=t,m&&m.classList.remove("active"),(m=e.target).classList.add("active"),d.classList.remove("active");var o=function(){var e=n(a)(n(i).mark((function e(){var o,r,c,a,s,l,u;return n(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.fetchBooksByCategory(t);case 3:o=e.sent.data,console.log(o),r=o[0].list_name,c=r.split(" "),a=c.length/2,s=c.slice(0,a).join(" "),l=c.slice(a).join(" "),u="".concat(s,' <span class="categories-title-decor">').concat(l,"</span>"),p.innerHTML='<h1 class="categories-title">'.concat(u,'</h1> <ul class="categories-item">').concat(o.map((function(e){var n=e.book_image,t=e.description,o=e.title,r=e.author;return'\n\n<li class="category-list-item">\n<a class="book-link" href="">\n<div class="book-thumb">\n<img class="book-image" src="'.concat(n,'" alt="').concat(t,'" />\n<div class="book-overlay">\n<p class="book-overlay-text">quick view</p>\n</div>\n</div>\n<div class="book-card-content">\n<h2 class="book-title">').concat(o,'</h2>\n<p class="book-author">').concat(r,"</p>\n</div>\n</a>\n</li>")})).join(""),"</ul>"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();o()})),c("71ZRj"),c("ekC86"),c("i8Q71");a=c("bpxeT"),i=c("2TvXO"),s=c("hrrt1");function g(e){return e.map((function(e){var n=e.book_image,t=e.description,o=e.title,r=e.author,c=e._id;return'<li class="books-list-item">\n                 <a class="book-link" href="" data-id="'.concat(c,'">\n                    <div class="book-thumb">\n                      <img class="book-image" src="').concat(n,'" alt="').concat(t,'" />\n\n                        <div class="book-overlay">\n                       <p class="book-overlay-text">quick view</p>\n                       </div>\n                       </div>                     \n                     <div class="book-card-content">\n                     <h2 class="book-title">').concat(o,'</h2>\n                     <p class="book-author">').concat(r,"</p>\n                     </div>\n                 </a>                    \n              </li>")})).join("")}var b;a=c("bpxeT"),i=c("2TvXO");b=c("aNJCr").getBundleURL("9p9yL")+c("iE7OH").resolve("2dPzb");var k;k=c("aNJCr").getBundleURL("9p9yL")+c("iE7OH").resolve("82OGy");var y;y=c("aNJCr").getBundleURL("9p9yL")+c("iE7OH").resolve("glj45");var h;h=c("aNJCr").getBundleURL("9p9yL")+c("iE7OH").resolve("cKFxX");var L;L=c("aNJCr").getBundleURL("9p9yL")+c("iE7OH").resolve("kLXsS");var w;w=c("aNJCr").getBundleURL("9p9yL")+c("iE7OH").resolve("jA3cI");var x=c("4LMMA"),E=new(0,(s=c("hrrt1")).SwaggerAPI),_=document.querySelector(".backdrop"),S=document.querySelector(".modal-close-btn"),H=document.querySelector(".modal-btn"),A=document.querySelector(".modal-info"),C=document.querySelector(".modal-book"),q={};function B(){document.querySelectorAll(".book-link").forEach((function(e){return e.addEventListener("click",O)}))}function O(e){return R.apply(this,arguments)}function R(){return(R=n(a)(n(i).mark((function e(t){var o;return n(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),document.body.style.overflow="hidden",_.classList.toggle("is-hidden"),_.addEventListener("click",J),window.addEventListener("keydown",U),S.addEventListener("click",z),e.prev=6,E.bookId=t.currentTarget.dataset.id,e.next=10,E.fetchBookById();case 10:o=e.sent,M(q=o.data),T(q),H.addEventListener("click",j),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6);case 20:case"end":return e.stop()}}),e,null,[[6,17]])})))).apply(this,arguments)}function T(e){var n=x.default.load("bookList");if(console.log(n),n&&0!==n.length){var t=!0,o=!1,r=void 0;try{for(var c,a=n[Symbol.iterator]();!(t=(c=a.next()).done);t=!0){if(book=c.value,book.title===e.title)return void F();N()}}catch(e){o=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(o)throw r}}}else N()}function j(){var e=x.default.load("bookList"),n=document.querySelector(".modal-book-name").textContent;"add to shopping list"===H.textContent?(x.default.addBookToStorage(q),F()):(e.forEach((function(e,t,o){if(e.title===n)return o.splice(t,1)})),x.default.save("bookList",e),N())}function N(){H.textContent="add to shopping list",A.style.display="none"}function F(){H.textContent="remove from the shopping list",A.style.display="block"}function M(e){var t='<img\nclass="modal-img"\nsrc='.concat(e.book_image,'\nalt="Book cover"\n/>\n<div class="modal-info-container">\n<p class="modal-book-name">').concat(e.title,'</p>\n<p class="modal-book-author">').concat(e.author,'</p>\n<p class="modal-list-name is-hidden">').concat(e.list_name,'</p>\n<p class="modal-book-desc">').concat(e.description,'\n</p>\n<div class="modal-icons-container">\n  <a href="').concat(e.buy_links[0].url,'" target="_blank" rel="noopener noreferrer"\n    ><picture class="modal-icon">\n      <source\n        srcset="').concat(n(b),'"\n        type="image/webp"\n      />\n      <source\n        srcset="').concat(n(k),'"\n        type="image/png"\n      />\n      <img\n        src="').concat(n(k),'"\n        alt="Amazon"\n      /> </picture\n  ></a>\n  <a href="').concat(e.buy_links[1].url,'" target="_blank" rel="noopener noreferrer"\n    ><picture class="modal-icon">\n      <source\n        srcset="').concat(n(y),'"\n        type="image/webp"\n      />\n      <source\n        srcset="').concat(n(h),'"\n        type="image/png"\n      />\n      <img\n        src="').concat(n(h),'"\n        alt="Apple Books"\n      /> </picture\n  ></a>\n  <a href="').concat(e.buy_links[4].url,'" target="_blank" rel="noopener noreferrer"\n    ><picture class="modal-icon">\n      <source\n        srcset="').concat(n(L),'"\n        type="image/webp"\n      />\n      <source\n        srcset="').concat(n(w),'"\n        type="image/png"\n      />\n      <img\n        src="').concat(n(w),'"\n        alt="Bookshop"\n      /></picture\n  ></a>\n</div>\n</div>');C.innerHTML=t}function U(e){"Escape"===e.key&&z()}function J(e){e.target===_&&z()}function z(){_.classList.toggle("is-hidden"),document.body.style.overflow="visible",_.removeEventListener("click",J),window.removeEventListener("keydown",U),S.removeEventListener("click",z)}var I=document.querySelector(".category-list"),X=document.querySelector(".home-title"),P=new(0,s.SwaggerAPI),D=0;function G(){return(G=n(a)(n(i).mark((function e(){var t,o,r,c,a;return n(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.fetchTopBooks();case 3:for(t=e.sent.data,o=0;o<4;o++)r=t[o].books,c=0,D<=767&&(c=1),D>=768&&D<1440&&(c=3),D>=1440&&(c=5),a='<li class="category-list-item top-list-item">\n        <p class="category-name" data-category-name="'.concat(r[0].list_name,'">').concat(r[0].list_name,'</p>\n        <ul class="books-list">\n          ').concat(g(r.slice(0,c)),'\n        </ul>\n       <button class="category-list-button">see more</button>  \n      </li>'),I.insertAdjacentHTML("beforeend",a),K();e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:B();case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function K(){document.querySelectorAll(".category-list-button").forEach((function(e){e.addEventListener("click",$)}))}function $(e){return Q.apply(this,arguments)}function Q(){return(Q=n(a)(n(i).mark((function e(t){var o,r;return n(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=t.target.previousElementSibling.previousElementSibling.textContent,P.categoryName=o,e.next=5,P.fetchBooksByCategory();case 5:r=e.sent.data,X.innerHTML=W(o),I.classList.add("category-list-click"),I.innerHTML=g(r),Z(o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function W(e){var n=e.split(" "),t=n.length/2,o=n.slice(0,t).join(" "),r=n.slice(t).join(" ");return"".concat(o,' <span class="home-title-decor">').concat(r,"</span>")}function Z(e){var n=document.querySelectorAll(".aside-item"),t=document.querySelector(".aside-title");n.forEach((function(n){e===n.textContent&&(t.classList.toggle("active"),n.classList.toggle("active"))}))}onload=function(e){D=e.target.body.clientWidth},function(){G.apply(this,arguments)}()}();
//# sourceMappingURL=index.80ab7664.js.map
